/**
 * Failed to minify the file using Terser v5.39.0. Serving the original version.
 * Original file: /npm/pickadate@5.0.0-alpha.3/lib/selectors/dateSelector.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
// @flow

import type { DatePickerState } from 'pickadate/types'
import * as dateUtil from 'pickadate/utils/dateUtil'

type IsDisabled = (state: DatePickerState, dateObject: Date) => boolean

export const isDisabled: IsDisabled = (state, dateObject) => {
  const { minimum, maximum, disabled } = state
  return (
    dateUtil.isBeforeDate(dateObject, minimum) ||
    dateUtil.isBeforeDate(maximum, dateObject) ||
    disabled.some(value => {
      if (typeof value === 'number') {
        return dateObject.getDay() === value
      }
      if (value instanceof Date) {
        return dateUtil.isSameDate(dateObject, value)
      }
      if (Array.isArray(value)) {
        const [fromDate, toDate] = value
        return (
          dateUtil.isSameOrBeforeDate(fromDate, dateObject) &&
          dateUtil.isSameOrBeforeDate(dateObject, toDate)
        )
      }
    })
  )
}
