/**
 * Failed to minify the file using Terser v5.39.0. Serving the original version.
 * Original file: /npm/pickadate@5.0.0-alpha.3/lib/actors/setTimeActor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
// @flow

import type { DatePickerActor, SetTimePayload } from 'pickadate/types'

const setTimeActor: DatePickerActor<SetTimePayload> = (state, payload) => {
  let { selected } = state
  if (!selected) {
    throw new Error('Cannot set the time without a selected date')
  }

  if (payload.hours != null && payload.hours !== selected.getHours()) {
    selected = new Date(selected)
    selected.setHours(payload.hours)
  }
  if (payload.minutes != null && payload.minutes !== selected.getMinutes()) {
    selected = new Date(selected)
    selected.setMinutes(payload.minutes)
  }

  if (selected !== state.selected) {
    return {
      selected,
    }
  }
}

export default setTimeActor
