/**
 * Failed to minify the file using Terser v5.39.0. Serving the original version.
 * Original file: /npm/pickadate@5.0.0-alpha.3/lib/actors/setDisabledActor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
// @flow

import type { DatePickerActor, SetDisabledPayload } from 'pickadate/types'

const setDisabledActor: DatePickerActor<SetDisabledPayload> = (
  state,
  payload
) => {
  if (!Array.isArray(payload.value)) {
    return
  }

  const disabled = payload.value.filter(value => {
    // Keep in disabled weekdays
    if (typeof value === 'number') {
      return value >= 0 && value <= 6
    }

    // Keep in disabled range of dates
    if (Array.isArray(value)) {
      return (
        value.length === 2 &&
        value[0] instanceof Date &&
        value[1] instanceof Date
      )
    }

    // Keep in disabled individual dates
    return value instanceof Date
  })
  return { disabled }
}

export default setDisabledActor
